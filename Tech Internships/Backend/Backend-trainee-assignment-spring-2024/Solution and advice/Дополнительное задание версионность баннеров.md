# Дополнительное задание: версионность баннеров

## Задание

Иногда получается так, что необходимо вернуться к одной из трех предыдущих версий баннера в связи с найденной ошибкой в логике, тексте и т.д. Измените API таким образом, чтобы можно было просмотреть существующие версии баннера и выбрать подходящую версию.

## Пример решения

Создаем отдельную таблицу с версиями баннеров. При создании баннера, создаем запись еще и в таблице с версиями (в транзакции, либо асинхронно через очередь). 

Почему отдельная таблица, а не просто флаг активной версии? 

Основная нагрузка у нас будет на получение баннеров актуальной версии. Если мы предполагаем частое редактирование баннеров, то размер таблицы с 3-мя последними версиями каждого из баннеров будет гораздо больше, что может замедлить скорость выполнения запроса на получение актуального баннера/баннеров. 

### Избавление от старых версий

Нет необходимости хранить всю историю — избавляемся от старых записей.

**Сохраняем новую версию синхронно (в транзакции)**

Можно сделать крон, который будет обрабатывать таблицу с историей и удалять лишние версии (при необходимости сохранения только последних N). 

**Сохраняем новую версию асинхронно (через очередь)**

Можно удалить лишние старые версии прямо при записи новой — в транзакции проверяем количество версий в истории и удаляем самую старую для этого баннера, если требуется.
