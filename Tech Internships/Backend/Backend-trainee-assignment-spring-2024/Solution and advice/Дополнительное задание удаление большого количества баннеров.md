# Дополнительное задание: удаление большого количества баннеров

## Задание

Добавить метод удаления баннеров по фиче или тегу, время ответа которого не должно превышать 100 мс, независимо от количества баннеров. В связи с небольшим временем ответа метода, рекомендуется ознакомиться с механизмом выполнения отложенных действий. 

## Пример решения

Что нужно учесть при решении:

1) время ответа метода удаления баннеров сильно ограничено, а операция может быть очень тяжелой - необходимо делать это асинхронно

2) баннеров, подходящих под условие, может быть так много, что их нельзя удалять одним запросом - нужно делать это батчами (небольшими пачками) 

3) если во время асинхронной обработки удаления произошел сбой или перезапуск приложения, мы все равно хотим иметь возможность обработать эту операцию - поэтому просто запустить удаление в отдельной горутине нам не подходит 

4) мы хотим удалить именно **те** баннеры, которые подходили при критерии при выполнении запроса - если пользователь инициировал удаление баннеров по тегу, а затем добавил новый баннер с таким тегом - он должен остаться

Отложенно задачу удаления можно выполнить двумя способами: 

- через отправку события на удаление в очередь и обработку очереди консюмером
- через отдельную таблицу задач, в которую будет сохраняться задача в методе удаления баннеров, а обрабатывать сами задачи будет отдельный процесс, который постоянно будет читать эту таблицу и обрабатывать задачи из нее

Примеры очередей, которые можно использовать: RabbitMQ, Kafka.

Что должно быть в сообщении / содержимом задачи? 

Удаление у нас происходит по фиче / тегу, но если мы будем использовать в сообщении именно их, есть вероятность возникновения проблемы, описанной в пункте 4. 

Поэтому, в методе удаления можно получать список id баннеров, которые мы хотим удалить, и отправлять в сообщении именно их.
