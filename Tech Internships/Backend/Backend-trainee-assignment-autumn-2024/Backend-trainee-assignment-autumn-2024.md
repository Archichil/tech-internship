# Тестовое задание для стажёра Backend 
# Сервис проведения тендеров
## Проблема:

Авито — большая компания, сервисами которой пользуются миллионы. Среди пользователей Авито есть как физические, так и юридические лица (компании и предприятия). Авито следит за потребностями своих пользователей, анализирует их опыт. На основе этого появляются новые идеи, расширяющие функционал сервиса. 

Одной из таких идей стал сервис тендеров для бизнеса. В чем суть? 
Бизнес (заказчик) описывает задачу и создает тендер на её выполнение, а пользователи или другие компании (исполнители) предлагают свои выгодные условия для решения задачи. Лучшее предложение выигрывает тендер и исполнитель воплощает задумку заказчика. 

Помогите инженерам Авито реализовать новое HTTP API!

## Про приложение

### Требования по стеку
- Язык сервиса: предпочтительным будет Go, при этом вы можете выбрать любой удобный вам.
- База данных: предпочтительной будет PostgreSQL, при этом вы можете выбрать любую удобную вам.
- Для деплоя зависимостей и самого сервиса рекомендуется использовать Docker и Docker Compose.
- Настройка приложения производится через переменные окружения.

## Основные требования
### Сущности
#### Пользователь и организация

Схемы сущностей пользователя и организации предопределены:

Пользователь (User):

```sql
CREATE TABLE employee (
    id VARCHAR PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

Организация (Organization):
```sql
CREATE TYPE organization_type AS ENUM (
    'IE',
    'LLC',
    'JSC'
);

CREATE TABLE organization (
    id VARCHAR PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    type organization_type,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE organization_responsible (
    id VARCHAR PRIMARY KEY,
    organization_id INT REFERENCES organization(id) ON DELETE CASCADE,
    user_id INT REFERENCES employee(id) ON DELETE CASCADE
);
```

### API

Все запросы и ответы должны соответствовать структуре и требованиям спецификации Open API, включая статус-коды, ограничения по длине и допустимые символы в строках.

Если запрос не соответствует требованиям, возвращайте статус-код 400. Если же имеется более специфичный код ответа, используйте его.

Если в запросе есть хотя бы один некорректный параметр, весь запрос должен быть отклонён.

### Бизнес-логика
#### Тендер

Тендеры могут создавать только пользователи от имени своей организации.

**Доступные действия с тендером:**

- **Создание**:
   - Тендер будет создан.
   - Доступен только ответственным за организацию.
   - Статус: `CREATED`.

- **Публикация**:
   - Тендер становится доступен всем пользователям.
   - Статус: `PUBLISHED`.

- **Закрытие**:
   - Тендер больше не доступен пользователям, кроме ответственных за организацию.
   - Статус: `CLOSED`.

- **Редактирование**:
   - Изменяются характеристики тендера.
   - Увеличивается версия.

#### Предложение

Предложения могут создавать пользователи либо от имени своей организации.

Предложение связано только с одним тендером.

Доступные действия с предложениями:

- **Создание**:
  - Предложение будет создано.
  - Доступно только автору и ответственным за организацию.
  - Статус: `CREATED`.

- **Публикация**:
  - Предложение становится доступно ответственным за организацию и автору.
  - Статус: `PUBLISHED`.

- **Отмена**:
  - Виден только автору и ответственным за организацию.
  - Статус: `CANCELED`.

- **Редактирование**:
  - Изменяются характеристики предложения.
  - Увеличивается версия.

- **Согласование/отклонение**:
  - Доступно только ответственным за организацию, связанной с тендером.
  - Решение может быть принято любым ответственным.
  - При согласовании одного предложения, тендер автоматически закрывается.

## Дополнительные требования

Эти задания не являются обязательными, но выполнение всех или части из них даст вам преимущество перед другими кандидатами.

1. Расширенный процесс согласования:

   - Если есть хотя бы одно решение reject, предложение отклоняется.
   
   - Для согласования предложения нужно получить решения больше или равно кворуму.
   
   - Кворум = min(3, количество ответственных за организацию).

3. Просмотр отзывов на прошлые предложения:

   - Ответственный за организацию может просмотреть отзывы на предложения автора, который создал предложение для его тендера.

5. Оставление отзывов на предложение:

   - Ответственный за организацию может оставить отзыв на предложение.

7. Добавить возможность отката по версии (Тендер и Предложение):

   - После отката, считается новой правкой с увеличением версии.

9. Описание конфигурации линтера.
10. Покрытие кода тестами. 

## Ход решения
Если у вас возникнут вопросы по заданию, ответы на которые вы не найдете в описанных «Основных требованиях», то вы вольны принимать решения самостоятельно.  
В таком случае приложите к проекту README-файл, в котором будет список вопросов и пояснения о том, как вы решили проблему и почему именно выбранным вами способом.

## Оформление решения
Необходимо предоставить публичный git-репозиторий на любом публичном хосте (GitHub / GitLab / etc), содержащий в master/main ветке:
1. Код сервиса
2. Makefile c командами сборки проекта / Описанная в README.md инструкция по запуску
3. Описанные в README.md вопросы/проблемы, с которыми столкнулись,  и ваша логика их решений (если требуется)
